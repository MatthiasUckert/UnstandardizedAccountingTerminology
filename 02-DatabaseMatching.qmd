---
title: "Database Item Matching"
---

```{r}
#| echo: false 
#| warning: false 
#| message: false

# Load required packages
library(DT)
library(arrow)

source("R/02-TableFunctions.R")

tab_matching <- arrow::read_parquet("data/DatabaseMatching.parquet") %>% 
  dplyr::select(-Order) %>% 
  dplyr::rename_with(~ gsub("\\.", "\n", .)) %>% 
  dplyr::select(-`Du\net\nal\n\n(2022)`, -dplyr::matches("Concept")) %>% 
  dplyr::rename(`Item Name` = ItemDescription)

default_table <- function(.tab) {
  create_interactive_table(
    .data = .tab,
    .page_length = 10L,
    .column_align = c("left", "left", "left"),
    .header_align = "left",
    .filter = "none",
    .font_size = 13L,
    .row_padding = 2L
  )
}
```

------------------------------------------------------------------------

# Overview

...

**Download Worldscope/Compustat Matching:** ðŸ“¥ [Excel File (62 KB)](downloads/DatabaseConceptMatching.xlsx)

## Worldscope

::: panel-tabset

### Income Statement

```{r}
#| echo: false
#| warning: false
#| message: false

tab_matching %>%
  dplyr::filter(Database == "Worldscope", Panel == "Income Statement") %>%
  dplyr::select(-Database, -Panel) %>%
  default_table()
```

### Balance Sheet

```{r}
#| echo: false
#| warning: false
#| message: false

tab_matching %>%
  dplyr::filter(Database == "Worldscope", Panel == "Balance Sheet") %>%
  dplyr::select(-Database, -Panel) %>%
  default_table()
```
:::

## Compustat

::: panel-tabset
### Income Statement

```{r}
#| echo: false
#| warning: false
#| message: false
 
tab_matching %>%
  dplyr::filter(Database == "Compustat", Panel == "Income Statement") %>%
  dplyr::select(-Database, -Panel) %>%
  default_table()
```

### Balance Sheet

```{r}
#| echo: false
#| warning: false
#| message: false

tab_matching %>%
  dplyr::filter(Database == "Compustat", Panel == "Balance Sheet") %>%
  dplyr::select(-Database, -Panel) %>%
  default_table()
```
:::
